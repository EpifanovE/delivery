import{r as h,j as e,d as i}from"./client-182d8dba.js";import{_ as M,h as S,f as L}from"./app-44caa45f.js";import{D as y}from"./PageTitle-d9e0c608.js";import{B}from"./Button-aab750b6.js";import{T as _,H as E,a as P,b as T,B as Z,c as V}from"./Table-44503a5c.js";import{u as f}from"./useTranslation-7f77c7c2.js";import{I as k}from"./InputLabel-27493f36.js";import{T as D}from"./TextInput-f11edc02.js";import{I as j}from"./InputError-9e8a7810.js";import{C as K,b as A,a as R,d as z}from"./Card-f5048bf7.js";import{C as O}from"./Container-65b3b15c.js";const q=s=>{const{resource:r}=s,[a,t]=h.useState(),[n,o]=h.useState(),{data:p,setData:d,get:m,processing:v,errors:N,reset:b}=M();h.useEffect(()=>{if(a)return;const c=route().params.orderBy,u=route().params.order;!c||!u||t({order:u,orderBy:c})},[]),h.useEffect(()=>{if(n)return;const c=route().params.per_page;if(c){if(!["10","25","50"].includes(c)){o("10");return}o(c)}},[]),h.useEffect(()=>{a&&S.get(route(`${r}.index`),{...route().params,orderBy:a.orderBy,order:a.order},{preserveState:!0})},[a]),h.useEffect(()=>{n&&S.get(route(`${r}.index`),{...route().params,per_page:n},{preserveState:!0})},[n]);const w=c=>{t(c)},x=c=>{c.preventDefault(),m(route(`${r}.index`))},g=()=>{b()};return{sort:a,perPage:n,filters:p,setFilters:d,filtersErrors:N,setPerPage:o,handleChangeSort:w,handleFiltersSubmit:x,handleFiltersReset:g,handleFiltersChange:(c,u)=>{d(c,u)},reset:g}},U=s=>{const{className:r}=s;return e("svg",{className:`${r?" "+r:""}`,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M10 18V16H14V18H10ZM6 13V11H18V13H6ZM3 8V6H21V8H3Z"})})},G=s=>{const{className:r}=s;return e("svg",{className:`${r?" "+r:""}`,viewBox:"0 0 256 253",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M205.7 149.7L133.7 221.7C132.171 223.179 130.127 224.005 128 224.005C125.873 224.005 123.829 223.179 122.3 221.7L50.2999 149.7C49.0242 148.146 48.3723 146.172 48.4709 144.164C48.5696 142.155 49.4117 140.256 50.8336 138.834C52.2555 137.412 54.1554 136.57 56.1638 136.471C58.1723 136.372 60.1456 137.024 61.6999 138.3L120 196.7V40C120 37.8783 120.843 35.8434 122.343 34.3431C123.843 32.8429 125.878 32 128 32C130.122 32 132.157 32.8429 133.657 34.3431C135.157 35.8434 136 37.8783 136 40V196.7L194.3 138.3C195.854 137.024 197.828 136.372 199.836 136.471C201.844 136.57 203.744 137.412 205.166 138.834C206.588 140.256 207.43 142.155 207.529 144.164C207.628 146.172 206.976 148.146 205.7 149.7Z"})})},J=s=>{const{className:r}=s;return e("svg",{className:`${r?" "+r:""}`,viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M205.7 117.7C204.171 119.179 202.127 120.005 200 120.005C197.873 120.005 195.829 119.179 194.3 117.7L136 59.3V216C136 218.122 135.157 220.157 133.657 221.657C132.157 223.157 130.122 224 128 224C125.878 224 123.843 223.157 122.343 221.657C120.843 220.157 120 218.122 120 216V59.3L61.6999 117.7C60.1456 118.976 58.1723 119.628 56.1638 119.529C54.1554 119.43 52.2555 118.588 50.8336 117.166C49.4117 115.744 48.5696 113.844 48.4709 111.836C48.3723 109.828 49.0242 107.854 50.2999 106.3L122.3 34.3C123.817 32.7977 125.865 31.955 128 31.955C130.135 31.955 132.183 32.7977 133.7 34.3L205.7 106.3C207.202 107.817 208.045 109.865 208.045 112C208.045 114.135 207.202 116.183 205.7 117.7Z"})})},Q=s=>{const{code:r,title:a,sort:t,onClick:n}=s;return i("span",{className:"flex items-center cursor-pointer",onClick:()=>{if((t==null?void 0:t.orderBy)!==r){n({orderBy:r,order:"desc"});return}(t==null?void 0:t.order)==="desc"?n({orderBy:r,order:"asc"}):n({orderBy:r,order:"desc"})},children:[e("span",{className:"mr-2 select-none",children:a}),r===(t==null?void 0:t.orderBy)&&t.order==="desc"&&e(G,{className:"w-4 h-4"}),r===(t==null?void 0:t.orderBy)&&t.order==="asc"&&e(J,{className:"w-4 h-4"}),r!==(t==null?void 0:t.orderBy)&&e("span",{className:"inline-block w-4"})]})},W=s=>{const{links:r}=s;return e("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm",children:r.map((a,t)=>a.url&&!a.active?e(L,{href:a.url,disabled:a.active||!a.url,className:"relative border-gray-300 inline-flex items-center border px-4 py-2 text-sm font-medium focus:z-20 h-[42px] flex items-center first:rounded-l-sm first:rounded-l-sm last:rounded-r-sm last:rounded-r-sm",dangerouslySetInnerHTML:{__html:a.label}},t):e("span",{className:`relative h-[42px] first:rounded-l-sm first:rounded-l-sm last:rounded-r-sm last:rounded-r-sm border-gray-300 inline-flex items-center border px-4 py-2 text-sm font-medium focus:z-20${a.active?" z-10 border-indigo-500 bg-indigo-50 text-indigo-600":""}`,dangerouslySetInnerHTML:{__html:a.label}},t))})},X=({value:s,onChange:r})=>{const{t:a}=f();return i("div",{className:"flex items-center",children:[e("span",{className:"mr-2",children:a("per_page")}),i("select",{name:"per_page",value:s,onChange:t=>r(t.target.value),className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-sm shadow-sm ",children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"})]})]})},Y=s=>{const{className:r}=s;return e("svg",{className:`${r?" "+r:""}`,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M19.3 8.925L15.05 4.725L16.45 3.325C16.8333 2.94167 17.3043 2.75 17.863 2.75C18.421 2.75 18.8917 2.94167 19.275 3.325L20.675 4.725C21.0583 5.10833 21.2583 5.571 21.275 6.113C21.2917 6.65433 21.1083 7.11667 20.725 7.5L19.3 8.925ZM17.85 10.4L7.25 21H3V16.75L13.6 6.15L17.85 10.4Z"})})},ee=s=>{const{className:r}=s;return e("svg",{className:`${r?" "+r:""}`,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M19 4H15.5L14.5 3H9.5L8.5 4H5V6H19M6 19C6 19.5304 6.21071 20.0391 6.58579 20.4142C6.96086 20.7893 7.46957 21 8 21H16C16.5304 21 17.0391 20.7893 17.4142 20.4142C17.7893 20.0391 18 19.5304 18 19V7H6V19Z"})})},re=s=>{const{t:r}=f();return e(L,{className:`text-indigo-600 hover:text-indigo-900 p-4 ${s.className}`,href:route(`${s.resource}.edit`,{[s.modelName]:s.item[s.primaryKey]}),title:r("buttons.edit")||"",children:e(Y,{className:"fill-blue-700 w-4 h-4"})})},se=s=>{const{t:r}=f();return e(L,{as:"button",className:`text-red-600 hover:text-red-900cursor-pointer p-4 ${s.className}`,href:route(`${s.resource}.destroy`,{[s.modelName]:s.item[s.primaryKey]}),method:"delete",onBefore:()=>confirm(r("messages.confirm")),title:r("buttons.delete")||"",children:e(ee,{className:"fill-red-700 w-4 h-4"})})},fe=s=>{const{t:r}=f(),{filters:a,onChange:t,errors:n}=s;return e("div",{className:"mb-4",children:i("div",{className:"pl-4 pr-4",children:[e(k,{forInput:"search",value:r("search")}),e(D,{id:"search",name:"s",value:a.s||"",className:"mt-1 block w-full",handleChange:o=>t("s",o.target.value)}),(n==null?void 0:n.s)&&e(j,{message:n.s,className:"mt-2"})]})})},pe=s=>{var I;const{t:r}=f(),{resource:a,primaryKeyName:t="id",modelName:n,items:o,columns:p,Actions:d=!0,Filters:m,create:v}=s,{sort:N,perPage:b,filters:w,filtersErrors:x,setPerPage:g,handleChangeSort:H,handleFiltersSubmit:c,handleFiltersReset:u,handleFiltersChange:$}=q({resource:a}),F=l=>l.sortable?e(Q,{title:l.label||r(l.resource),code:l.resource,sort:N,onClick:H}):l.label||r(l.resource);return e("div",{className:"py-12",children:e(O,{children:i(K,{children:[(!!m||!!v)&&i(A,{className:"pb-5 flex justify-between items-center",children:[!!v&&e(B,{variant:"success",href:route(`${a}.create`),children:r("buttons.create")}),!!m&&e("div",{className:"ml-auto",children:i(y,{children:[e(y.Trigger,{children:e("button",{children:e(U,{className:"w-6 h-6 fill-slate-400"})})}),e(y.Content,{className:"w-72",closeOnClickInside:!1,children:i("form",{className:"pt-4 pb-4",onSubmit:c,children:[!!m&&e(m,{filters:w,onChange:$,errors:x}),i("div",{className:"pl-4 pr-4",children:[e(B,{type:"submit",variant:"primary",className:"w-full mb-2",children:r("buttons.submit")}),e(B,{variant:"primaryOutline",className:"w-full",onClick:u,children:r("buttons.reset")})]})]})})]})})]}),e(R,{children:o.data.length>0?e("div",{className:"overflow-x-auto",children:i(_,{children:[e(E,{children:i(P,{className:"border-b",children:[p.map(l=>e(T,{children:F(l)},l.resource)),d&&e(T,{})]})}),e(Z,{children:o.data.map(l=>i(P,{className:"hover:bg-gray-50",children:[p.map(C=>e(V,{children:C.itemRender?C.itemRender(l):l[C.resource]},C.resource)),d&&e(V,{className:"p-0",children:typeof d!="boolean"?e(d,{item:l,resource:a,modelName:n,primaryKey:t}):i("div",{className:"flex justify-end",children:[e(re,{item:l,resource:a,modelName:n,primaryKey:t}),e(se,{item:l,resource:a,modelName:n,primaryKey:t})]})})]},l.id))})]})}):e("div",{children:r("entries_not_found")})}),((I=o==null?void 0:o.meta)==null?void 0:I.links)&&o.meta.links.length>3&&i(z,{className:"flex justify-between flex-wrap",children:[e("div",{className:"overflow-x-auto mb-3 lg:mb-0",children:e(W,{links:o.meta.links})}),e("div",{children:e(X,{value:b||"10",onChange:l=>g(l)})})]})]})})})};export{se as D,re as E,pe as I,fe as S};
