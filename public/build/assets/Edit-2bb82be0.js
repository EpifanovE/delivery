import{r as R,d as t,F as N,j as a}from"./client-182d8dba.js";import{h as O}from"./moment-fbc5633a.js";import{T as G,A as U,P as z}from"./PageTitle-d9e0c608.js";import{_ as J,n as K,i as g,h as Q}from"./app-44caa45f.js";import{T as n}from"./TextInput-f11edc02.js";import{I as s,L as c,F as h}from"./EditPage-6acf2f0c.js";import{C as V}from"./Container-65b3b15c.js";import{C as _,a as b,b as W,c as X,d as Z}from"./Card-f5048bf7.js";import{I as f}from"./InputError-9e8a7810.js";import{B as C}from"./Button-aab750b6.js";import{C as $}from"./Checkbox-1ddb5c95.js";import{T as ee,I as ae}from"./ImageControl-4a04938f.js";import{u as re}from"./useTranslation-7f77c7c2.js";const te=p=>{var w,x,F,I,D,T,k,A,H,j,E;const{t:l}=re(),{item:e}=p,{data:d,setData:i,errors:v,processing:o,post:S}=J({name:((w=e==null?void 0:e.data)==null?void 0:w.name)||"",description:((x=e==null?void 0:e.data)==null?void 0:x.description)||"",price:((F=e==null?void 0:e.data)==null?void 0:F.price.toString())||"",is_active:((I=e==null?void 0:e.data)==null?void 0:I.is_active)||!1,image:(D=e==null?void 0:e.data)!=null&&D.image?e.data.image.url:null,order_column:((T=e==null?void 0:e.data)==null?void 0:T.order_column.toString())||"",attributes:((k=e==null?void 0:e.data)==null?void 0:k.attributes)||[]});R.useEffect(()=>{var r;(r=e==null?void 0:e.data)!=null&&r.order_column&&i("order_column",e.data.order_column.toString())},[(A=e==null?void 0:e.data)==null?void 0:A.order_column]);const Y=r=>{r.preventDefault(),e!=null&&e.data.id?Q.post(route("services.update",{service:e.data.id}),{...d,_method:"put"},{forceFormData:!0}):S(route("services.store"),{forceFormData:!0})},B=r=>{i("image",r||null)},y=(r,u,m)=>{i("attributes",d.attributes.map((M,P)=>r!==P?M:{...M,[u]:m}))},q=()=>{i("attributes",[...d.attributes,{name:"",value:""}])},L=r=>{i("attributes",d.attributes.filter((u,m)=>m!==r))};return t(N,{children:[a(K,{title:l("service")}),a("div",{className:"py-12",children:a("form",{onSubmit:Y,children:t(V,{children:[a("div",{className:"flex justify-end px-6 sm:px-0",children:a(C,{variant:"primary",type:"submit",processing:o,children:l("buttons.save")})}),a(_,{children:t(b,{children:[(e==null?void 0:e.data.id)&&t(s,{children:[a(c,{children:"ID"}),a("div",{className:"flex-1",children:a(n,{value:e.data.id||"",readOnly:!0,className:"w-full"})})]}),t(s,{children:[a(c,{htmlFor:"name",children:l("name")}),t(h,{children:[a(n,{id:"name",value:d.name||"",className:"w-full",handleChange:r=>i("name",r.target.value),required:!0,disabled:o}),a(f,{className:"mt-2",message:v.name})]})]}),t(s,{children:[a(c,{htmlFor:"description",children:l("description")}),t(h,{children:[a(ee,{id:"description",value:d.description||"",className:"w-full",handleChange:r=>i("description",r.target.value),disabled:o}),a(f,{className:"mt-2",message:v.description})]})]}),t(s,{children:[a(c,{htmlFor:"price",children:l("price")}),t(h,{children:[a(n,{id:"price",value:d.price||"",className:"w-full",handleChange:r=>i("price",r.target.value),required:!0,disabled:o,type:"number",step:1,min:0}),a(f,{className:"mt-2",message:v.price})]})]}),t(s,{children:[a(c,{htmlFor:"is_active",children:l("is_active",{context:"service"})}),t(h,{children:[a($,{id:"is_active",name:"is_active",checked:d.is_active,onChange:r=>i("is_active",r.target.checked)}),a(f,{className:"mt-2",message:v.is_active})]})]}),!!((H=e==null?void 0:e.data)!=null&&H.id)&&t(s,{children:[a(c,{htmlFor:"order_column",children:l("sort_order")}),t(h,{children:[a(n,{id:"order_column",value:d.order_column||"",className:"w-full",handleChange:r=>i("order_column",r.target.value),disabled:o,type:"number",step:1,min:0}),a(f,{className:"mt-2",message:v.price})]})]}),(e==null?void 0:e.data.created_at)&&t(s,{children:[a(c,{children:l("created_at",{context:"male"})}),a(h,{children:a(n,{value:O(e.data.created_at).format("DD-MM-YY HH:mm"),readOnly:!0})})]}),(e==null?void 0:e.data.updated_at)&&t(s,{children:[a(c,{children:l("updated_at",{context:"male"})}),a(h,{children:a(n,{value:O(e.data.updated_at).format("DD-MM-YY HH:mm"),readOnly:!0})})]})]})}),a(_,{children:a(b,{children:a(ae,{file:d.image,onChange:B,imageUrl:(E=(j=e==null?void 0:e.data)==null?void 0:j.image)==null?void 0:E.full_url})})}),t(_,{children:[a(W,{children:a(X,{children:l("attributes")})}),a(b,{children:d.attributes.map((r,u)=>t("div",{className:"flex gap-2 mb-3 last:mb-0",children:[t("div",{className:"flex gap-2 flex-wrap grow",children:[a(n,{value:r.name||"",placeholder:l("name"),handleChange:m=>y(u,"name",m.target.value),className:"w-full lg:w-auto"}),a(n,{value:r.value||"",placeholder:l("value"),handleChange:m=>y(u,"value",m.target.value),className:"w-full lg:w-auto grow"})]}),a(C,{variant:"primaryOutline",type:"button",processing:o,onClick:()=>L(u),title:l("buttons.delete"),children:a(G,{className:"w-4 h-4"})})]},u))}),a(Z,{children:a(C,{variant:"primary",type:"button",processing:o,onClick:q,children:l("buttons.add")})})]})]})})})]})};te.layout=p=>{var l,e,d;return a(U,{children:p,...p.props,header:a(z,{children:(l=p.props.item)!=null&&l.data.id?t(N,{children:[g.t("service"),": ",(d=(e=p.props.item)==null?void 0:e.data)==null?void 0:d.id]}):t(N,{children:[g.t("service"),": ",g.t("creation")]})})})};export{te as default};
